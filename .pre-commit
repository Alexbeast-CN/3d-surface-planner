#!/bin/bash

# Exit if any command fails
set -e

# Define an array of file types to check
file_types=("cpp" "h" "hpp" "py" "xml" "xacro")

# Check code style for each file type
for type in "${file_types[@]}"; do
    # Find files of the current type and run corresponding code style checker
    find . -name "*.$type" | while read file; do
        case "$type" in
            "cpp" | "h" | "hpp")
                # Run C++ code style checker (e.g., clang-format)
                clang-format -i "$file"
                ;;
            "py")
                # Run Python code style checker (e.g., flake8)
                flake8 "$file"
                ;;
            "xml" | "xacro")
                # Run XML code style checker (if available)
                # You can replace xmllint with another XML style checker if needed
                xmllint --format "$file" > /tmp/formatted.xml && mv /tmp/formatted.xml "$file"
                ;;
        esac
    done
done